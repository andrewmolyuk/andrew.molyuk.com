---
title: "Шаблоны даты и времени в Go"
tags: ["Go"]
date: 2022-01-18T14:59:46+02:00
---

Начиная работать с Go невозможно не удивиться необычному форматированию даты и времени, совершенно отличному от других
языков программирования. Для того чтобы отобразить дату в требуемом виде надо как шаблон передать отформатированную
магическую дату - "Monday Jan 2 15:04:05 2006 MST". В первую секунду даже развел руками - ну почему? а как же унификация
и стандартизация подхода?

При более детальном рассмотрении обнаружилась объяснение как, но так и не получены ответы зачем.

<!--more-->

Традиционный подход в форматировании данных отличается в разных языках и предполагает знания всех или же хотя бы
наиболее используемых обозначений даты и времени в шаблонах. При этом зачастую, даже после нескольких лет использования
того или иного языка программирования, при необходимости вывода чего-либо более сложного чем `DD/MM/YYYY` я перепроверяю
в документации все ли я правильно сделал, в правильном ли регистре и почему я не получаю на экране то, что хотелось бы
видеть.

Функция `Parse` как и `Format` в Go работают с магическим шаблоном, который на поверку является простым числовым
перечислением, где 1 - это месяц (спасибо американскому формату за первенство), 2 - день, 3 - час, 4 - минуты, 5 -
секунды, 6 - год и 7 - часовая зона. С точки зрения программиста знакомого с другими форматами сначала ломается голова,
а потом начинаешь видеть в этом плюсы.

В традиционном коде я не вижу как дата будет выглядеть после форматирования, я мысленно все равно делаю парсинг даты и
представляю как это отработает и будет выглядеть, а в Go сразу вижу отформатированное представление даты. В этом плане
это также облегчает работу продуктовикам пишущим требования и технарям исполнителям - это понятный формат обеим сторонам
и не требующий дополнительных телодвижений.

Вот пример кода с форматом, чтобы было все понятнее:

```go
now := time.Now()

fmt.Println(now.Format("2006-01-02 15:04:05"))
fmt.Println(now.Format("January 02, 2006"))
fmt.Println(now.Format("2006/01/02 3:4:5 PM"))

// части даты можно вытаскивать и строить свой формат
fmt.Printf("%d-%02d-%02d %02d:%02d:%02d\n", now.Year(), now.Month(),
now.Day(), now.Hour(), now.Minute(), now.Second())
```

Ну и результат на лице:

```shell
2022-01-18 17:20:27
January 18, 2022
2022/01/18 5:20:27 PM
2022-01-18 17:20:27
```

Подводя итоги можно сказать, что для человека пришедшего в Go из многих других языков я нашел данный подход очень
непривычным и забавным. Со временем к нему привыкаешь и не замечаешь и даже в целом понятна та сермяжная правда, которую
в него закладывали.

Ко всему прочему я не нашел простого пути для вывода часов без лидирующих нулей в 24 часовом формате.

```go
date := time.Date(1970, 8, 23, 1, 2, 3, 0, time.UTC)
fmt.Println(date.Format("3:4:5"))
fmt.Println(date.Format("15:4:5"))
```

Ожидаемый неожидаемый результат:

```shell
1:2:3
01:2:3
```

Хотя написать функцию, заполняющую этот пробел не составляет труда, но зачем создавать ограничения там где можно
унифицировать подход и не заставлять вновь обращенных адептов разводить руками. Очень неоднозначное решение с форматом в
целом. Но если быть честным до конца, то в том же очень популярном JavaScript с датами сплошной ад и поприседать там без
дополнительных библиотек придется не раз.